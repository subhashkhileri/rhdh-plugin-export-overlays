# yaml-language-server: $schema=https://raw.githubusercontent.com/redhat-developer/rhdh-plugins/refs/heads/main/workspaces/extensions/json-schema/plugins.json
apiVersion: extensions.backstage.io/v1alpha1
kind: Plugin
metadata:
  name: aws-codebuild
  namespace: community
  title: Amazon CodeBuild
  annotations:
    extensions.backstage.io/pre-installed: 'true'
  description: |
    View and monitor AWS CodeBuild projects directly from your Backstage catalog.
    Track build status, history, and project configuration alongside your service entities.
  tags:
    - aws
    - cloud
    - ci-cd
    - codebuild
  links:
    - url: https://github.com/awslabs/backstage-plugins-for-aws
      title: Homepage
    - url: https://github.com/awslabs/backstage-plugins-for-aws/issues
      title: Bugs
    - title: Source Code
      url: https://github.com/awslabs/backstage-plugins-for-aws/tree/main/plugins/codebuild
    - title: Documentation
      url: https://github.com/awslabs/backstage-plugins-for-aws/blob/main/plugins/codebuild/README.md
spec:
  authors:
    - name: AWS
      url: https://aws.amazon.com/

  publisher: AWS
  support:
    provider: Community
    level: community
  lifecycle: active

  categories:
    - CI/CD

  highlights:
    - Real-time CodeBuild project status monitoring
    - View build history and logs
    - Project-level metrics and insights
    - Tag-based or ARN-based project discovery
    - Integration with AWS SDK credential chain

  description: |
    The Amazon CodeBuild plugin for Backstage enables developers to view and monitor their AWS CodeBuild
    projects directly within the Backstage developer portal. This integration provides visibility into
    your CI/CD pipelines alongside your service catalog entities.

    ## Key Features

    * **Build Monitoring**: View real-time status of CodeBuild projects including build history and current state
    * **Build Details**: Access detailed information about builds, including logs and artifacts
    * **Flexible Discovery**: Find CodeBuild projects using either specific ARNs or tag-based queries
    * **AWS Integration**: Seamlessly integrates with AWS SDK credential chain for authentication
    * **Entity Annotations**: Link Backstage catalog entities to CodeBuild projects using simple annotations

    ## Adding The Plugin To Red Hat Developer Hub

    This plugin consists of both frontend and backend components that work together to provide CodeBuild integration.

    See the [Red Hat Developer Hub documentation](https://docs.redhat.com/en/documentation/red_hat_developer_hub)
    for further instructions on how to add, enable, configure, and remove plugins in your instance.

    ## Configuring The Plugin

    The AWS CodeBuild plugin requires AWS credentials to be configured. The backend plugin uses the AWS SDK credential chain,
    which supports multiple authentication methods including environment variables, IAM roles, and AWS profiles.

    ### Backend Configuration

    Configure AWS credentials via environment variables:

    ```bash
    AWS_REGION=us-east-1
    AWS_ACCESS_KEY_ID=your-access-key-id
    AWS_SECRET_ACCESS_KEY=your-secret-access-key
    ```

    For production deployments, using IAM roles for service accounts (IRSA) or EC2 instance profiles is recommended
    for better security.

    ### Entity Annotations

    Add CodeBuild project information to your catalog entities using annotations:

    ```yaml
    apiVersion: backstage.io/v1alpha1
    kind: Component
    metadata:
      name: my-service
      annotations:
        # Option 1: Specific project ARN
        aws.amazon.com/aws-codebuild-project-arn: arn:aws:codebuild:us-east-1:123456789012:project/my-build

        # Option 2: Tag-based discovery
        # aws.amazon.com/aws-codebuild-project-tags: component=my-app,environment=production
    spec:
      type: service
      lifecycle: production
      owner: platform-team
    ```

    The frontend plugin will automatically display an "AWS CodeBuild" card on catalog entities with these annotations,
    showing the associated CodeBuild project information.

    ## Prerequisites

    * AWS account with CodeBuild projects
    * AWS credentials configured with appropriate IAM permissions
    * IAM permissions required:
      * `codebuild:BatchGetProjects`
      * `codebuild:ListBuildsForProject`
      * `codebuild:BatchGetBuilds`
      * Additional permissions may be required based on your configuration

    For more detailed configuration instructions, see the [plugin documentation](https://github.com/awslabs/backstage-plugins-for-aws/blob/main/plugins/codebuild/README.md).

  packages:
    - aws-aws-codebuild-plugin-for-backstage
    - aws-aws-codebuild-plugin-for-backstage-backend

  history:
    added: '2026-01-12'
